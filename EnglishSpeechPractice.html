<!DOCTYPE html>
<!--
  Licensed under the Apache License, Version 2.0
  See LICENSE file or http://www.apache.org/licenses/LICENSE-2.0

  Copyright (c) 2025 Lee Liao (Github id lee-liao)
  Please retain attribution when redistributing or modifying.
-->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­ç”¨è¯­ç»ƒä¹ </title>
    
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#7c3aed',
                        accent: '#f59e0b',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .glass-effect {
                backdrop-filter: blur(10px);
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            .hover-lift {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .hover-lift:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }
            .fade-in {
                animation: fadeIn 0.5s ease-in;
            }
            .slide-up {
                animation: slideUp 0.6s ease-out;
            }
            .pulse-animation {
                animation: pulse 2s infinite;
            }
            .recording-pulse {
                animation: recordingPulse 1.5s infinite;
            }
            .timer-bar {
                height: 4px;
                background: #e2e8f0;
                border-radius: 2px;
                overflow: hidden;
                margin: 1rem 0;
            }
            .timer-fill {
                height: 100%;
                background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);
                border-radius: 2px;
                transition: width 1s linear;
                width: 100%;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes recordingPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        
        .meeting-scene {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .meeting-room {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
        }
        
        .prompt-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .answer-input {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .answer-input:focus {
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            outline: none;
        }
        
        .feedback-correct {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            animation: slideUp 0.5s ease-out;
        }
        
        .feedback-incorrect {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            animation: slideUp 0.5s ease-out;
        }
        
        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2563eb 0%, #7c3aed 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .scene-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }
        
        .scene-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .scene-button.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .sentence-example {
            background: #f8fafc;
            border-left: 4px solid #2563eb;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 0.5rem 0;
        }
        
        .next-button {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .next-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
        }
        
        .voice-button {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 1rem;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
            box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
        }
        
        .voice-button:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(239, 68, 68, 0.4);
        }
        
        .voice-button.recording {
            animation: recordingPulse 1.5s infinite;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        }
        
        .voice-status {
            text-align: center;
            margin: 1rem 0;
            font-weight: 600;
            color: #6b7280;
        }
        
        .recognized-text {
            background: #f3f4f6;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid #e5e7eb;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .voice-instructions {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            color: #0c4a6e;
        }
        
        .permission-request {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            color: #92400e;
            text-align: center;
        }
        
        .error-message {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            color: #991b1b;
            text-align: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 1rem 0;
        }
        
        .action-button {
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .primary-button {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
        }
        
        .primary-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }
        
        .secondary-button {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
        }
        
        .secondary-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
        }
        
        .stop-button {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        .stop-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }
        
        .recognition-info {
            background: #f8fafc;
            border-radius: 8px;
            padding: 0.8rem;
            margin: 0.5rem 0;
            font-size: 0.9rem;
            color: #6b7280;
            text-align: center;
        }
        
        .recording-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .timer-display {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ef4444;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-3{margin-left:0.75rem}.mr-2{margin-right:0.5rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.w-32{width:8rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-4xl{max-width:56rem}.max-w-6xl{max-width:72rem}.flex-shrink-0{flex-shrink:0}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-4{gap:1rem}.gap-6{gap:1.5rem}.space-x-4 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.rounded-lg{border-radius:0.5rem}.border-l-4{border-left-width:4px}.border-yellow-400{--tw-border-opacity:1;border-color:rgb(250 204 21 / var(--tw-border-opacity, 1))}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity:1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity:1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.p-4{padding:1rem}.p-8{padding:2rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-inter{font-family:Inter, sans-serif}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-6xl{font-size:3.75rem;line-height:1}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.text-accent{--tw-text-opacity:1;color:rgb(245 158 11 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-primary{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-success{--tw-text-opacity:1;color:rgb(16 185 129 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity:1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.opacity-90{opacity:0.9}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.glass-effect {
                -webkit-backdrop-filter: blur(10px);
                        backdrop-filter: blur(10px);
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }.hover-lift {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }.hover-lift:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }.slide-up {
                animation: slideUp 0.6s ease-out;
            }.timer-bar {
                height: 4px;
                background: #e2e8f0;
                border-radius: 2px;
                overflow: hidden;
                margin: 1rem 0;
            }.timer-fill {
                height: 100%;
                background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);
                border-radius: 2px;
                transition: width 1s linear;
                width: 100%;
            }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes recordingPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        
        .meeting-scene {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .meeting-room {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
        }
        
        .prompt-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .answer-input {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .answer-input:focus {
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            outline: none;
        }
        
        .feedback-correct {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            animation: slideUp 0.5s ease-out;
        }
        
        .feedback-incorrect {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            animation: slideUp 0.5s ease-out;
        }
        
        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2563eb 0%, #7c3aed 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .scene-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }
        
        .scene-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .scene-button.active {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .sentence-example {
            background: #f8fafc;
            border-left: 4px solid #2563eb;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 0.5rem 0;
        }
        
        .next-button {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .next-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
        }
        
        .voice-button {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 1rem;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
            box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
        }
        
        .voice-button:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(239, 68, 68, 0.4);
        }
        
        .voice-button.recording {
            animation: recordingPulse 1.5s infinite;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
        }
        
        .voice-status {
            text-align: center;
            margin: 1rem 0;
            font-weight: 600;
            color: #6b7280;
        }
        
        .recognized-text {
            background: #f3f4f6;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid #e5e7eb;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .voice-instructions {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            color: #0c4a6e;
        }
        
        .permission-request {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            color: #92400e;
            text-align: center;
        }
        
        .error-message {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            color: #991b1b;
            text-align: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 1rem 0;
        }
        
        .action-button {
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .primary-button {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
        }
        
        .primary-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }
        
        .secondary-button {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
        }
        
        .secondary-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
        }
        
        .stop-button {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        .stop-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }
        
        .recognition-info {
            background: #f8fafc;
            border-radius: 8px;
            padding: 0.8rem;
            margin: 0.5rem 0;
            font-size: 0.9rem;
            color: #6b7280;
            text-align: center;
        }
        
        .recording-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .timer-display {
            font-size: 1.2rem;
            font-weight: 600;
            color: #ef4444;
        }
        
        .hover\:text-secondary:hover{--tw-text-opacity:1;color:rgb(124 58 237 / var(--tw-text-opacity, 1))}
        
        @media (min-width: 640px){.sm\:flex-row{flex-direction:row}}
        
        @media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}}
        
        @media (min-width: 1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}}
    </style><script id="anydoc-subtitle-inject" src="chrome-extension://aopddeflghjljihihabdclejbojaomaf/public/subtitle/script/inject.js"></script></head>
<body class="font-inter meeting-scene">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="glass-effect text-white p-4">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">
                <span class="mr-2">ğŸ’¬</span>
                è‹±è¯­ç”¨è¯­ç»ƒä¹ 
            </h1>
            <div class="flex items-center space-x-4">
                <span class="text-sm opacity-90">è¿›åº¦: <span id="progress-text">0%</span></span>
                <div class="w-32 progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="container mx-auto px-4 py-8">
        <!-- æµè§ˆå™¨å…¼å®¹æ€§æç¤º -->
        <div id="browser-warning" class="hidden bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
            <div class="flex">
                <div class="flex-shrink-0">
                    <span class="text-yellow-400">âš ï¸</span>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-yellow-700">
                        <strong>æµè§ˆå™¨æç¤ºï¼š</strong>è¯­éŸ³è¯†åˆ«åŠŸèƒ½åœ¨Chromeã€Edgeç­‰ç°ä»£æµè§ˆå™¨ä¸­æ•ˆæœæœ€ä½³ã€‚å¦‚æœè¯­éŸ³åŠŸèƒ½æ— æ³•ä½¿ç”¨ï¼Œè¯·å°è¯•ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„Chromeæµè§ˆå™¨ã€‚
                    </p>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯é€‰æ‹©ç•Œé¢ -->
        <div id="scene-selection" class="text-center slide-up">
            <h2 class="text-3xl font-bold text-white mb-8">é€‰æ‹©åœºæ™¯</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                <button class="scene-button hover-lift" onclick="startPractice(&#39;opening&#39;)" style="opacity: 1; transform: translateY(0px);">
                    <span class="text-3xl mb-2">â–¶ï¸</span>
                    <h3 class="text-xl font-semibold mb-2">ä¼šè®®å¼€åœº</h3>
                    <p class="text-sm opacity-90">å­¦ä¹ å¦‚ä½•å¼€å§‹ä¼šè®®ã€é—®å€™å’Œä»‹ç»è®®ç¨‹</p>
                </button>
                
                <button class="scene-button hover-lift" onclick="startPractice(&#39;discussion&#39;)" style="opacity: 1; transform: translateY(0px);">
                    <span class="text-3xl mb-2">ğŸ’¬</span>
                    <h3 class="text-xl font-semibold mb-2">å¼•å¯¼è®¨è®º</h3>
                    <p class="text-sm opacity-90">å­¦ä¹ å¦‚ä½•å¼•å¯¼è®¨è®ºã€å¾æ±‚æ„è§å’Œæ§åˆ¶æµç¨‹</p>
                </button>
                
                <button class="scene-button hover-lift" onclick="startPractice(&#39;opinions&#39;)" style="opacity: 1; transform: translateY(0px);">
                    <span class="text-3xl mb-2">ğŸ‘</span>
                    <h3 class="text-xl font-semibold mb-2">è¡¨è¾¾æ„è§</h3>
                    <p class="text-sm opacity-90">å­¦ä¹ å¦‚ä½•è¡¨è¾¾åŒæ„ã€åå¯¹å’Œæå‡ºå»ºè®®</p>
                </button>
                
                <button class="scene-button hover-lift" onclick="startPractice(&#39;questions&#39;)" style="opacity: 1; transform: translateY(0px);">
                    <span class="text-3xl mb-2">â“</span>
                    <h3 class="text-xl font-semibold mb-2">æé—®æ¾„æ¸…</h3>
                    <p class="text-sm opacity-90">å­¦ä¹ å¦‚ä½•æé—®ã€è¯·æ±‚é‡å¤å’Œæ¾„æ¸…é—®é¢˜</p>
                </button>
                
                <button class="scene-button hover-lift" onclick="startPractice(&#39;closing&#39;)" style="opacity: 1; transform: translateY(0px);">
                    <span class="text-3xl mb-2">âœ…</span>
                    <h3 class="text-xl font-semibold mb-2">ä¼šè®®ç»“æŸ</h3>
                    <p class="text-sm opacity-90">å­¦ä¹ å¦‚ä½•æ€»ç»“ä¼šè®®ã€æ„Ÿè°¢å’Œå®‰æ’åç»­</p>
                </button>
                
                <button class="scene-button hover-lift" onclick="startPractice('mixed')" style="opacity: 1; transform: translateY(0px);">
                    <span class="text-3xl mb-2">ğŸ”€</span>
                    <h3 class="text-xl font-semibold mb-2">ç»¼åˆç»ƒä¹ </h3>
                    <p class="text-sm opacity-90">æ··åˆæ‰€æœ‰åœºæ™¯è¿›è¡Œç»¼åˆç»ƒä¹ </p>
                </button>
            </div>
        </div>

        <!-- ç»ƒä¹ ç•Œé¢ -->
        <div id="practice-area" class="max-w-4xl mx-auto hidden">
            <div class="meeting-room p-8">
                <!-- åœºæ™¯æ ‡é¢˜ -->
                <div class="text-center mb-8">
                    <h2 id="scene-title" class="text-2xl font-bold text-gray-800 mb-2">ä¼šè®®ç»“æŸ</h2>
                    <p id="scene-description" class="text-gray-600">å­¦ä¹ å¦‚ä½•æ€»ç»“ä¼šè®®ã€æ„Ÿè°¢å’Œå®‰æ’åç»­</p>
                </div>

                <!-- å½“å‰è¿›åº¦ -->
                <div class="mb-6">
                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                        <span>é¢˜ç›® <span id="current-question">1</span> / <span id="total-questions">8</span></span>
                        <span id="score-display">å¾—åˆ†: 1</span>
                    </div>
                    <div class="progress-bar">
                        <div id="question-progress" class="progress-fill" style="width: 12.5%;"></div>
                    </div>
                </div>

                <!-- æç¤ºå¡ç‰‡ -->
                <div class="prompt-card">
                    <h3 class="text-xl font-semibold mb-2">
                        <span class="mr-2">ğŸ’¡</span>
                        è¯·ç”¨è‹±è¯­è¡¨è¾¾
                    </h3>
                    <p id="chinese-prompt" class="text-lg">è®©æˆ‘æ€»ç»“ä¸€ä¸‹ä»Šå¤©è®¨è®ºçš„è¦ç‚¹ã€‚</p>
                </div>

                <!-- è¯­éŸ³è¾“å…¥åŒºåŸŸ -->
                <div class="text-center mb-6">
                    <div class="voice-instructions">
                        <span class="mr-2">â„¹ï¸</span>
                        é€‰æ‹©è¾“å…¥æ–¹å¼ï¼šè¯­éŸ³æˆ–æ‰‹åŠ¨è¾“å…¥
                    </div>
                    
                    <!-- æƒé™è¯·æ±‚æç¤º -->
                    <div id="permission-request" class="permission-request hidden">
                        <span class="mr-2">ğŸ¤ğŸš«</span>
                        è¯·å…è®¸æµè§ˆå™¨è®¿é—®æ‚¨çš„éº¦å…‹é£ä»¥ä½¿ç”¨è¯­éŸ³åŠŸèƒ½
                    </div>
                    
                    <!-- é”™è¯¯æç¤º -->
                    <div id="error-message" class="error-message hidden"></div>
                    
                    <div class="voice-status" id="voice-status" style="color: rgb(107, 114, 128);">è¯­éŸ³è¯†åˆ«å®Œæˆï¼Œå¯ä»¥æ£€æŸ¥ç­”æ¡ˆäº†</div>
                    
                    <!-- å½•éŸ³æ§åˆ¶åŒºåŸŸ -->
                    <div class="recording-controls">
                        <!-- è¯­éŸ³æŒ‰é’® -->
                        <div id="voice-button" class="voice-button" onclick="toggleRecording()"><span><span class="">ğŸ¤</span></span></div>
                        
                        <!-- å½•éŸ³è®¡æ—¶å™¨ -->
                        <div id="recording-timer" class="hidden">
                            <div class="timer-display" id="timer-display">00:09</div>
                            <div class="timer-bar">
                                <div class="timer-fill" id="timer-fill" style="width: 10%;"></div>
                            </div>
                            <div class="recognition-info">
                                ç‚¹å‡»éº¦å…‹é£æŒ‰é’®æˆ–"åœæ­¢å½•éŸ³"æŒ‰é’®ç»“æŸ
                            </div>
                        </div>
                        
                        <!-- åœæ­¢å½•éŸ³æŒ‰é’® -->
                        <button id="stop-recording-button" class="action-button stop-button hidden" onclick="stopRecording()">
                            <span>â¹ï¸</span>
                            åœæ­¢å½•éŸ³
                        </button>
                    </div>
                    
                    <!-- è¯†åˆ«ç»“æœæ˜¾ç¤º -->
                    <div class="recognized-text" id="recognized-text">let me recap the points of today's discussion and the tomorrow's schedule</div>
                </div>

                <!-- æ‰‹åŠ¨è¾“å…¥åŒºåŸŸ -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <span class="mr-2">âŒ¨ï¸</span>
                        æˆ–è€…æ‰‹åŠ¨è¾“å…¥ï¼š
                    </label>
                    <input type="text" id="english-answer" class="answer-input w-full" placeholder="è¯·åœ¨è¿™é‡Œè¾“å…¥ä½ çš„è‹±è¯­è¡¨è¾¾..." onkeypress="handleKeyPress(event)">
                </div>

                <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
                <div class="action-buttons">
                    <button id="check-button" class="action-button primary-button hidden" onclick="checkAnswer()">
                        <span>âœ”ï¸</span>
                        æ£€æŸ¥ç­”æ¡ˆ
                    </button>
                    <button id="reset-button" class="action-button secondary-button hidden" onclick="resetInput()">
                        <span>ğŸ¯</span>
                        é‡æ–°è¾“å…¥
                    </button>
                </div>

                <!-- åé¦ˆåŒºåŸŸ -->
                <div id="feedback-area" class="feedback-correct">âœ… æ­£ç¡®ï¼ä½ çš„è¡¨è¾¾å¾ˆå¥½ï¼<br><br>ä½ è¯´çš„ï¼š"let me recap the points of today's discussion"</div>

                <!-- æ­£ç¡®ç­”æ¡ˆå’Œè§£æ -->
                <div id="correct-answer" class="">
                    <h4 class="text-lg font-semibold text-gray-800 mb-2">
                        <span class="mr-2 text-accent">â­</span>
                        å¸¸ç”¨è¡¨è¾¾
                    </h4>
                    <div id="answer-examples" class="space-y-2"><div class="sentence-example"><strong>1.</strong> Let me summarize the key points from today's discussion.</div><div class="sentence-example"><strong>2.</strong> I'd like to recap what we discussed today.</div><div class="sentence-example"><strong>3.</strong> Let me summarize the main takeaways from our meeting.</div></div>
                </div>

                <!-- ä¸‹ä¸€é¢˜æŒ‰é’® -->
                <div id="next-button-container" class="text-center mt-6">
                    <button class="next-button px-8 py-3" onclick="nextQuestion()">
                        <span class="mr-2">â¡ï¸</span>
                        ä¸‹ä¸€é¢˜
                    </button>
                </div>

                <!-- è¿”å›åœºæ™¯é€‰æ‹© -->
                <div class="text-center mt-8">
                    <button class="text-primary hover:text-secondary transition-colors" onclick="backToSelection()">
                        <span class="mr-2">â¬…ï¸</span>
                        è¿”å›åœºæ™¯é€‰æ‹©
                    </button>
                </div>
            </div>
        </div>

        <!-- ç»ƒä¹ ç»“æœç•Œé¢ -->
        <div id="practice-result" class="hidden text-center slide-up">
            <div class="meeting-room p-8 max-w-2xl mx-auto">
                <div id="result-icon" class="text-6xl mb-4"></div>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">ç»ƒä¹ å®Œæˆï¼</h2>
                <div id="result-message" class="text-xl text-gray-600 mb-6"></div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <div class="text-2xl font-bold text-primary" id="total-questions-count">10</div>
                        <div class="text-sm text-gray-600">æ€»é¢˜æ•°</div>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <div class="text-2xl font-bold text-success" id="correct-answers-count">0</div>
                        <div class="text-sm text-gray-600">æ­£ç¡®ç­”æ¡ˆ</div>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <div class="text-2xl font-bold text-accent" id="final-score">0%</div>
                        <div class="text-sm text-gray-600">æ­£ç¡®ç‡</div>
                    </div>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button class="scene-button px-6 py-3" onclick="restartPractice()">
                        <span class="mr-2">ğŸ¯</span>
                        é‡æ–°ç»ƒä¹ 
                    </button>
                    <button class="scene-button px-6 py-3" onclick="backToSelection()">
                        <span class="mr-2">ğŸ </span>
                        è¿”å›ä¸»é¡µ
                    </button>
                </div>
            </div>
        </div>
        
        <!-- è‡ªå®šä¹‰åœºæ™¯ä¸Šä¼  -->
        <div id="custom-scene-manager" class="max-w-4xl mx-auto mt-8">
            <div class="text-center">
                <h3 class="text-gray-600 mb-2">è‡ªå®šä¹‰åœºæ™¯</h3>
                <div class="flex flex-col sm:flex-row items-center justify-center gap-2">
                    <label class="answer-input flex-grow max-w-md cursor-pointer" style="padding: 0.5rem; display: flex; align-items: center; justify-content: center;">
                        <span class="text-gray-600" id="file-name-display">é€‰æ‹©JSONæ–‡ä»¶</span>
                        <input type="file" id="json-upload" accept=".json" class="hidden" lang="zh-CN" onchange="updateFileName(this)">
                    </label>
                    <button class="action-button secondary-button" onclick="uploadCustomScene()">ä¸Šä¼ å¹¶ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ä¼šè®®ç”¨è¯­æ•°æ®
        const meetingPhrases = {
            opening: [
                {
                    chinese: "å¤§å®¶æ—©ä¸Šå¥½ï¼Œæ¬¢è¿å‚åŠ ä»Šå¤©çš„ä¼šè®®ã€‚",
                    english: ["Good morning everyone, welcome to today's meeting.", "Good morning everyone, thank you for joining us today."]
                },
                {
                    chinese: "æ—¢ç„¶å¤§å®¶éƒ½åˆ°äº†ï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚",
                    english: ["Since everyone is here, let's get started.", "Now that everyone is here, let's begin.", "Shall we get started since everyone is present?"]
                },
                {
                    chinese: "ä»Šå¤©æˆ‘ä»¬æœ‰å‡ ä¸ªè®®é¢˜è¦è®¨è®ºã€‚",
                    english: ["We have several topics to discuss today.", "Today we have a few items on the agenda.", "There are several points we need to cover today."]
                },
                {
                    chinese: "è®©æˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹ä»Šå¤©çš„è®®ç¨‹ã€‚",
                    english: ["Let me briefly go over today's agenda.", "Let me introduce today's agenda briefly.", "I'd like to outline today's agenda."]
                },
                {
                    chinese: "æˆ‘ä»¬å¤§çº¦æœ‰60åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥è¯·å¤§å®¶é›†ä¸­æ³¨æ„åŠ›ã€‚",
                    english: ["We have about 60 minutes, so let's stay focused.", "We have approximately one hour, so let's keep on track.", "Our time is limited to 60 minutes, so let's make the most of it."]
                },
                {
                    chinese: "é¦–å…ˆï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸Šæ¬¡ä¼šè®®çš„çºªè¦ã€‚",
                    english: ["First, let's review the minutes from our last meeting.", "To begin, let's go over the minutes from the previous meeting.", "First, let's recap what was discussed in our last meeting."]
                },
                {
                    chinese: "æˆ‘æƒ³ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬çš„æ–°åŒäº‹ã€‚",
                    english: ["I'd like to introduce our new colleague.", "Let me introduce our new team member.", "I want to welcome our new colleague."]
                },
                {
                    chinese: "ä»Šå¤©ä¼šè®®çš„ç›®æ ‡æ˜¯ç¡®å®šé¡¹ç›®çš„æ—¶é—´è¡¨ã€‚",
                    english: ["Today's goal is to finalize the project timeline.", "Our objective today is to establish the project schedule.", "The purpose of today's meeting is to determine the project timeline."]
                }
            ],
            discussion: [
                {
                    chinese: "æˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªè®®é¢˜å¼€å§‹å§ã€‚",
                    english: ["Let's start with the first item.", "Shall we begin with the first topic?", "Let's move to the first agenda item."]
                },
                {
                    chinese: "å¤§å®¶å¯¹è¿™ä¸ªé—®é¢˜æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ",
                    english: ["What are your thoughts on this issue?", "How do you feel about this problem?", "What's your opinion on this matter?"]
                },
                {
                    chinese: "æˆ‘ä»¬è¿›è¡Œä¸‹ä¸€ä¸ªè®®é¢˜å§ã€‚",
                    english: ["Let's move on to the next item.", "Shall we proceed to the next topic?", "Let's turn to the next agenda item."]
                },
                {
                    chinese: "æœ‰äººæƒ³è¡¥å……ä»€ä¹ˆå—ï¼Ÿ",
                    english: ["Does anyone have anything to add?", "Would anyone like to contribute further?", "Any additional comments?"]
                },
                {
                    chinese: "æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªé—®é¢˜ä¸Šè¾¾æˆå…±è¯†ã€‚",
                    english: ["We need to reach a consensus on this issue.", "We should come to an agreement on this matter.", "It's important that we align on this point."]
                },
                {
                    chinese: "è®©æˆ‘ä»¬åˆ†ç»„è®¨è®ºè§£å†³æ–¹æ¡ˆã€‚",
                    english: ["Let's break into groups to discuss solutions.", "We can form small groups to brainstorm solutions.", "Let's split into teams to discuss possible solutions."]
                },
                {
                    chinese: "è®¨è®ºæœ‰äº›åç¦»ä¸»é¢˜äº†ï¼Œæˆ‘ä»¬å›åˆ°æ­£é¢˜ã€‚",
                    english: ["We're getting off track, let's get back to the main point.", "The discussion is wandering, let's refocus on the main issue.", "We're digressing, let's return to the original topic."]
                },
                {
                    chinese: "æˆ‘ä»¬éœ€è¦æ§åˆ¶æ—¶é—´ï¼Œæ‰€ä»¥è¯·å¤§å®¶ç®€æ˜æ‰¼è¦ã€‚",
                    english: ["We need to manage our time, so please be concise.", "Time is limited, so let's keep our comments brief.", "We're on a tight schedule, so please be to the point."]
                }
            ],
            opinions: [
                {
                    chinese: "æˆ‘å®Œå…¨åŒæ„ä½ çš„å»ºè®®ã€‚",
                    english: ["I fully agree with your suggestion.", "I completely support your proposal.", "I totally agree with what you're saying."]
                },
                {
                    chinese: "æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸ªå¥½ä¸»æ„ã€‚",
                    english: ["I think that's a great idea.", "I believe this is a good approach.", "In my opinion, this is an excellent suggestion."]
                },
                {
                    chinese: "ææ€•æˆ‘ä¸èƒ½åŒæ„è¿™ä¸ªè§‚ç‚¹ã€‚",
                    english: ["I'm afraid I can't agree with thisè§‚ç‚¹.", "I'm sorry, but I disagree with this approach.", "Unfortunately, I have a different opinion."]
                },
                {
                    chinese: "æˆ‘å»ºè®®æˆ‘ä»¬å…ˆè¿›è¡Œä¸€ä¸ªè¯•ç‚¹é¡¹ç›®ã€‚",
                    english: ["I suggest we run a pilot project first.", "I recommend conducting a trial first.", "My suggestion is to test this with a pilot program."]
                },
                {
                    chinese: "ä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªé€‰æ‹©ã€‚",
                    english: ["From my perspective, we have two options.", "In my view, there are two choices available.", "As I see it, we have two alternatives."]
                },
                {
                    chinese: "æˆ‘è®¤ä¸ºæˆ‘ä»¬åº”è¯¥åˆ†é…æ›´å¤šèµ„æºç»™è¿™ä¸ªé¡¹ç›®ã€‚",
                    english: ["I think we should allocate more resources to this project.", "I believe we need to invest more resources in this project.", "In my opinion, this project deserves more resources."]
                },
                {
                    chinese: "ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªé—®é¢˜ä¸ŠæŠ˜ä¸­ä¸€ä¸‹ã€‚",
                    english: ["Maybe we can find a middle ground on this issue.", "Perhaps we can reach a compromise on this point.", "Maybe we can meet halfway on this."]
                },
                {
                    chinese: "æˆ‘å¯¹è¿™ä¸ªæ–¹æ¡ˆæŒä¿ç•™æ€åº¦ã€‚",
                    english: ["I have reservations about this plan.", "I'm cautious about this approach.", "I'm not fully convinced about this solution."]
                }
            ],
            questions: [
                {
                    chinese: "ä½ èƒ½è¯¦ç»†è§£é‡Šä¸€ä¸‹å—ï¼Ÿ",
                    english: ["Could you elaborate on that?", "Can you explain that in more detail?", "Would you mind providing more details?"]
                },
                {
                    chinese: "æˆ‘æ²¡å¬æ¸…æ¥šï¼Œä½ èƒ½å†è¯´ä¸€éå—ï¼Ÿ",
                    english: ["I didn't catch that, could you repeat it?", "I'm sorry, I missed that. Could you say it again?", "Could you repeat that, please? I didn't hear clearly."]
                },
                {
                    chinese: "ä½ å…·ä½“æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",
                    english: ["What exactly do you mean?", "Could you clarify what you mean?", "What do you mean specifically?"]
                },
                {
                    chinese: "ä½ èƒ½æä¾›æ›´å¤šç»†èŠ‚å—ï¼Ÿ",
                    english: ["Can you provide more details?", "Would you mind giving us more information?", "Could you elaborate with more specifics?"]
                },
                {
                    chinese: "æˆ‘ç†è§£å¾—å¯¹å—ï¼Ÿ",
                    english: ["Am I understanding this correctly?", "Is my understanding correct?", "Did I get that right?"]
                },
                {
                    chinese: "è¿™ä¸ªå†³å®šä¼šå½±å“æˆ‘ä»¬çš„æ—¶é—´è¡¨å—ï¼Ÿ",
                    english: ["Will this decision affect our timeline?", "How will this decision impact our schedule?", "Does this decision have implications for our timeline?"]
                },
                {
                    chinese: "æœ‰äººå¯¹è¿™ä¸ªè§„å®šæœ‰å¼‚è®®å—ï¼Ÿ",
                    english: ["Does anyone have objections to this regulation?", "Is there anyone who disagrees with this rule?", "Any objections to this policy?"]
                },
                {
                    chinese: "æˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥è®¨è®ºè¿™ä¸ªé—®é¢˜å—ï¼Ÿ",
                    english: ["Do we need to discuss this further?", "Should we explore this issue in more depth?", "Is further discussion needed on this matter?"]
                }
            ],
            closing: [
                {
                    chinese: "è®©æˆ‘æ€»ç»“ä¸€ä¸‹ä»Šå¤©è®¨è®ºçš„è¦ç‚¹ã€‚",
                    english: ["Let me summarize the key points from today's discussion.", "I'd like to recap what we discussed today.", "Let me summarize the main takeaways from our meeting."]
                },
                {
                    chinese: "æ„Ÿè°¢å¤§å®¶ä»Šå¤©çš„å‚ä¸å’Œè´¡çŒ®ã€‚",
                    english: ["Thank you all for your participation and contributions.", "I appreciate everyone's input today.", "Thank you for your valuable contributions."]
                },
                {
                    chinese: "æˆ‘ä»¬è¾¾æˆäº†ä¸€äº›é‡è¦çš„å…±è¯†ã€‚",
                    english: ["We've reached some important agreements.", "We've come to several key decisions.", "Some significant consensus has been achieved."]
                },
                {
                    chinese: "æˆ‘ä¼šåœ¨æ˜å¤©ä¹‹å‰å‘é€ä¼šè®®çºªè¦ã€‚",
                    english: ["I'll send out the meeting minutes by tomorrow.", "The minutes will be distributed by tomorrow.", "I'll circulate the meeting notes before tomorrow."]
                },
                {
                    chinese: "ä¸‹æ¬¡ä¼šè®®å®‰æ’åœ¨ä¸‹å‘¨åŒä¸€æ—¶é—´ã€‚",
                    english: ["The next meeting is scheduled for the same time next week.", "We'll meet again at the same time next week.", "Our next meeting will be next week at the same time."]
                },
                {
                    chinese: "å¦‚æœæ²¡æœ‰å…¶ä»–é—®é¢˜ï¼Œä¼šè®®åˆ°æ­¤ç»“æŸã€‚",
                    english: ["If there are no further questions, the meeting is adjourned.", "Unless there are any other questions, we can end here.", "If no one has anything else to add, we'll conclude the meeting."]
                },
                {
                    chinese: "è¯·å¤§å®¶ç¡®ä¿æŒ‰æ—¶å®Œæˆåˆ†é…çš„ä»»åŠ¡ã€‚",
                    english: ["Please ensure you complete your assigned tasks on time.", "Make sure to finish your tasks by the deadline.", "Please meet the deadlines for your assigned responsibilities."]
                },
                {
                    chinese: "æœŸå¾…çœ‹åˆ°æˆ‘ä»¬çš„è®¡åˆ’æˆåŠŸå®æ–½ã€‚",
                    english: ["I look forward to seeing our plans successfully implemented.", "I'm excited to see our plans put into action.", "I anticipate successful execution of our plans."]
                }
            ]
        };

        // å…¨å±€å˜é‡
        let currentScene = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let totalQuestions = 0;
        
        // è¯­éŸ³è¯†åˆ«ç›¸å…³å˜é‡
        let recognition = null;
        let isRecording = false;
        let currentRecognizedText = '';
        let recognizedSegments = []; // å­˜å‚¨æ‰€æœ‰è¯†åˆ«ç‰‡æ®µ
        let permissionGranted = false;
        let recordingTimer = null;
        let recordingStartTime = 0;
        let maxRecordingTime = 10; // æœ€å¤§å½•éŸ³æ—¶é—´ï¼ˆç§’ï¼‰

        // åœºæ™¯ä¿¡æ¯
        const sceneInfo = {
            opening: {
                title: "ä¼šè®®å¼€åœº",
                description: "å­¦ä¹ å¦‚ä½•å¼€å§‹ä¼šè®®ã€é—®å€™å’Œä»‹ç»è®®ç¨‹"
            },
            discussion: {
                title: "å¼•å¯¼è®¨è®º",
                description: "å­¦ä¹ å¦‚ä½•å¼•å¯¼è®¨è®ºã€å¾æ±‚æ„è§å’Œæ§åˆ¶æµç¨‹"
            },
            opinions: {
                title: "è¡¨è¾¾æ„è§",
                description: "å­¦ä¹ å¦‚ä½•è¡¨è¾¾åŒæ„ã€åå¯¹å’Œæå‡ºå»ºè®®"
            },
            questions: {
                title: "æé—®æ¾„æ¸…",
                description: "å­¦ä¹ å¦‚ä½•æé—®ã€è¯·æ±‚é‡å¤å’Œæ¾„æ¸…é—®é¢˜"
            },
            closing: {
                title: "ä¼šè®®ç»“æŸ",
                description: "å­¦ä¹ å¦‚ä½•æ€»ç»“ä¼šè®®ã€æ„Ÿè°¢å’Œå®‰æ’åç»­"
            },
            mixed: {
                title: "ç»¼åˆç»ƒä¹ ",
                description: "æ··åˆæ‰€æœ‰åœºæ™¯è¿›è¡Œç»¼åˆç»ƒä¹ "
            }
        };

        // åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«
        async function initSpeechRecognition() {
            try {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                if (!SpeechRecognition) {
                    showError("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨Chromeæˆ–Edgeæµè§ˆå™¨");
                    return false;
                }

                // æ£€æŸ¥éº¦å…‹é£æƒé™
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    stream.getTracks().forEach(track => track.stop());
                    permissionGranted = true;
                    document.getElementById('permission-request').classList.add('hidden');
                } catch (permissionError) {
                    permissionGranted = false;
                    showPermissionRequest();
                    return false;
                }

                recognition = new SpeechRecognition();
                recognition.continuous = true; // ä½¿ç”¨è¿ç»­è¯†åˆ«æ¨¡å¼
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                recognition.maxAlternatives = 1;

                // å»¶é•¿é™éŸ³æ£€æµ‹æ—¶é—´
                recognition.onaudiostart = function() {
                    console.log('Audio started');
                };
                
                recognition.onstart = function() {
                    isRecording = true;
                    startRecordingTimer();
                    updateVoiceUI(true);
                };
                
                recognition.onresult = function(event) {
                    // è·å–æ‰€æœ‰è¯†åˆ«ç»“æœå¹¶è¿½åŠ åˆ°æ•°ç»„ä¸­
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript.trim();
                        if (transcript) {
                            recognizedSegments.push(transcript);
                        }
                    }
                    
                    // å°†æ‰€æœ‰ç‰‡æ®µè¿æ¥æˆå®Œæ•´æ–‡æœ¬
                    currentRecognizedText = recognizedSegments.join(' ');
                    document.getElementById('recognized-text').textContent = currentRecognizedText;
                    document.getElementById('english-answer').value = currentRecognizedText;
                };
                
                recognition.onend = function(event) {
                    // æ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°å¯åŠ¨è¯†åˆ«
                    if (isRecording && Date.now() - recordingStartTime < maxRecordingTime * 1000) {
                        try {
                            recognition.start();
                        } catch (error) {
                            console.error('é‡å¯è¯†åˆ«å¤±è´¥:', error);
                            stopRecordingInternal();
                        }
                    } else {
                        stopRecordingInternal();
                    }
                };
                
                recognition.onerror = function(event) {
                    console.error('è¯­éŸ³è¯†åˆ«é”™è¯¯:', event.error);
                    
                    if (event.error !== 'no-speech' && event.error !== 'audio-capture') {
                        stopRecordingInternal();
                        
                        let errorMessage = 'è¯†åˆ«å¤±è´¥ï¼Œè¯·é‡è¯•';
                        switch(event.error) {
                            case 'not-allowed':
                                errorMessage = 'éº¦å…‹é£æƒé™è¢«æ‹’ç»ï¼Œè¯·åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å¯ç”¨';
                                showPermissionRequest();
                                break;
                            case 'aborted':
                                errorMessage = 'å½•éŸ³å·²å–æ¶ˆ';
                                break;
                            case 'network':
                                errorMessage = 'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
                                break;
                        }
                        
                        showError(errorMessage);
                    }
                };
                
                return true;
            } catch (error) {
                console.error('åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«å¤±è´¥:', error);
                showError('åˆå§‹åŒ–è¯­éŸ³åŠŸèƒ½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                return false;
            }
        }

        // å¼€å§‹å½•éŸ³è®¡æ—¶å™¨
        function startRecordingTimer() {
            recordingStartTime = Date.now();
            updateTimerDisplay();
            
            recordingTimer = setInterval(() => {
                const elapsedTime = Math.floor((Date.now() - recordingStartTime) / 1000);
                
                if (elapsedTime >= maxRecordingTime) {
                    stopRecording();
                    return;
                }
                
                updateTimerDisplay();
            }, 1000);
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimerDisplay() {
            const elapsedTime = Math.floor((Date.now() - recordingStartTime) / 1000);
            const remainingTime = maxRecordingTime - elapsedTime;
            
            const minutes = Math.floor(elapsedTime / 60);
            const seconds = elapsedTime % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timer-display').textContent = timeString;
            
            // æ›´æ–°è¿›åº¦æ¡
            const progress = (elapsedTime / maxRecordingTime) * 100;
            document.getElementById('timer-fill').style.width = (100 - progress) + '%';
        }

        // åœæ­¢å½•éŸ³ï¼ˆå†…éƒ¨å‡½æ•°ï¼‰
        function stopRecordingInternal() {
            if (isRecording) {
                isRecording = false;
                
                if (recognition) {
                    try {
                        recognition.stop();
                    } catch (error) {
                        console.error('åœæ­¢è¯†åˆ«å¤±è´¥:', error);
                    }
                }
                
                if (recordingTimer) {
                    clearInterval(recordingTimer);
                    recordingTimer = null;
                }
                
                updateVoiceUI(false);
                
                if (currentRecognizedText.trim()) {
                    document.getElementById('voice-status').textContent = 'è¯­éŸ³è¯†åˆ«å®Œæˆï¼Œå¯ä»¥æ£€æŸ¥ç­”æ¡ˆäº†';
                } else {
                    document.getElementById('voice-status').textContent = 'æœªè¯†åˆ«åˆ°è¯­éŸ³ï¼Œè¯·é‡è¯•';
                }
            }
        }

        // åœæ­¢å½•éŸ³ï¼ˆå…¬å¼€å‡½æ•°ï¼‰
        function stopRecording() {
            stopRecordingInternal();
        }

        // æ˜¾ç¤ºæƒé™è¯·æ±‚æç¤º
        function showPermissionRequest() {
            document.getElementById('permission-request').classList.remove('hidden');
            document.getElementById('error-message').classList.add('hidden');
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.textContent = message;
            errorElement.classList.remove('hidden');
            
            setTimeout(() => {
                errorElement.classList.add('hidden');
            }, 5000);
        }

        // æ›´æ–°è¯­éŸ³UI
        function updateVoiceUI(isRecording) {
            const voiceButton = document.getElementById('voice-button');
            const voiceStatus = document.getElementById('voice-status');
            const recordingTimer = document.getElementById('recording-timer');
            const stopButton = document.getElementById('stop-recording-button');
            
            if (isRecording) {
voiceButton.innerHTML = '<span><span class="">ğŸ¤</span></span>';
                voiceStatus.textContent = 'æ­£åœ¨å½•éŸ³...è¯·æ¸…æ™°è¯´è¯';
                voiceStatus.style.color = '#ef4444';
                recordingTimer.classList.remove('hidden');
                stopButton.classList.remove('hidden');
                document.getElementById('recognized-text').textContent = 'è¯†åˆ«ä¸­...';
            } else {
                voiceButton.classList.remove('recording');
                voiceButton.innerHTML = '<span><span class="">ğŸ¤</span></span>';
                voiceStatus.style.color = '#6b7280';
                recordingTimer.classList.add('hidden');
                stopButton.classList.add('hidden');
            }
        }

        // åˆ‡æ¢å½•éŸ³çŠ¶æ€
        async function toggleRecording() {
            document.getElementById('error-message').classList.add('hidden');
            
            if (isRecording) {
                stopRecording();
                return;
            }
            
            if (!permissionGranted) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    stream.getTracks().forEach(track => track.stop());
                    permissionGranted = true;
                    document.getElementById('permission-request').classList.add('hidden');
                } catch (error) {
                    showPermissionRequest();
                    return;
                }
            }

            if (!recognition) {
                const supported = await initSpeechRecognition();
                if (!supported) {
                    return;
                }
            }
            
            // é‡ç½®ä¹‹å‰çš„è¯†åˆ«ç»“æœ
            recognizedSegments = [];
            currentRecognizedText = '';
            document.getElementById('recognized-text').textContent = 'å‡†å¤‡å½•éŸ³...';
            
            try {
                recognition.start();
            } catch (error) {
                console.error('å¼€å§‹å½•éŸ³å¤±è´¥:', error);
                showError('æ— æ³•å¼€å§‹å½•éŸ³ï¼Œè¯·é‡è¯•');
                updateVoiceUI(false);
            }
        }

        // å¼€å§‹ç»ƒä¹ 
        async function startPractice(scene) {
            currentScene = scene;
            currentQuestionIndex = 0;
            score = 0;

            if (scene === 'mixed') {
                currentQuestions = [];
                Object.values(meetingPhrases).forEach(scenePhrases => {
                    currentQuestions = currentQuestions.concat(scenePhrases);
                });
                currentQuestions = shuffleArray(currentQuestions).slice(0, 10);
            } else {
                currentQuestions = [...meetingPhrases[scene]];
            }

            totalQuestions = currentQuestions.length;

            document.getElementById('scene-selection').classList.add('hidden');
            document.getElementById('custom-scene-manager').classList.add('hidden');
            document.getElementById('practice-area').classList.remove('hidden');

            document.getElementById('scene-title').textContent = sceneInfo[scene].title;
            document.getElementById('scene-description').textContent = sceneInfo[scene].description;

            document.getElementById('total-questions').textContent = totalQuestions;
            updateProgress();

            showCurrentQuestion();
            
            await initSpeechRecognition();
            
            if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
                document.getElementById('browser-warning').classList.remove('hidden');
            }
        }

        // æ˜¾ç¤ºå½“å‰é¢˜ç›®
        function showCurrentQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            document.getElementById('chinese-prompt').textContent = question.chinese;
            resetInput();
            
            document.getElementById('feedback-area').classList.add('hidden');
            document.getElementById('correct-answer').classList.add('hidden');
            document.getElementById('next-button-container').classList.add('hidden');
            document.getElementById('permission-request').classList.add('hidden');
            document.getElementById('error-message').classList.add('hidden');
            
            document.getElementById('check-button').classList.remove('hidden');
            document.getElementById('reset-button').classList.remove('hidden');
            
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
        }

        // é‡ç½®è¾“å…¥
        function resetInput() {
            document.getElementById('english-answer').value = '';
            recognizedSegments = [];
            currentRecognizedText = '';
            document.getElementById('recognized-text').textContent = 'è¯†åˆ«çš„æ–‡æœ¬å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...';
            document.getElementById('voice-status').textContent = 'å‡†å¤‡å°±ç»ªï¼Œè¯·é€‰æ‹©è¾“å…¥æ–¹å¼';
            document.getElementById('voice-status').style.color = '#6b7280';
            
            stopRecording();
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const userAnswer = document.getElementById('english-answer').value.trim().toLowerCase();
            if (!userAnswer) {
                document.getElementById('voice-status').textContent = 'è¯·å…ˆè¾“å…¥æˆ–è¯´å‡ºä½ çš„ç­”æ¡ˆ';
                document.getElementById('voice-status').style.color = '#ef4444';
                return;
            }
            
            const correctAnswers = currentQuestions[currentQuestionIndex].english;
            
            let isCorrect = false;
            let bestMatch = '';
            let bestSimilarity = 0;
            
            for (let correctAnswer of correctAnswers) {
                const normalizedCorrect = correctAnswer.toLowerCase().replace(/[^\w\s]/g, '');
                const normalizedUser = userAnswer.replace(/[^\w\s]/g, '');
                
                const similarityScore = similarity(normalizedUser, normalizedCorrect);
                
                if (similarityScore > bestSimilarity) {
                    bestSimilarity = similarityScore;
                    bestMatch = correctAnswer;
                }
                
                if (normalizedUser.includes(normalizedCorrect) || 
                    normalizedCorrect.includes(normalizedUser) ||
                    similarityScore > 0.6) {
                    isCorrect = true;
                    break;
                }
            }
            
            if (isCorrect) {
                score++;
                feedbackMessage = `âœ… æ­£ç¡®ï¼ä½ çš„è¡¨è¾¾å¾ˆå¥½ï¼\n\nä½ è¯´çš„ï¼š"${userAnswer}"`;
                document.getElementById('feedback-area').className = 'feedback-correct';
            } else {
                feedbackMessage = `âŒ ä¸å¤ªå¯¹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ­£ç¡®çš„è¡¨è¾¾ã€‚\n\nä½ è¯´çš„ï¼š"${userAnswer}"\n\næœ€æ¥è¿‘çš„æ­£ç¡®è¡¨è¾¾ï¼š"${bestMatch}"`;
                document.getElementById('feedback-area').className = 'feedback-incorrect';
            }
            
            document.getElementById('feedback-area').innerHTML = feedbackMessage.replace(/\n/g, '<br>');
            document.getElementById('feedback-area').classList.remove('hidden');
            
            showCorrectAnswers();
            
            document.getElementById('check-button').classList.add('hidden');
            document.getElementById('reset-button').classList.add('hidden');
            document.getElementById('next-button-container').classList.remove('hidden');
            
            document.getElementById('score-display').textContent = `å¾—åˆ†: ${score}`;
        }

        // æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
        function showCorrectAnswers() {
            const correctAnswers = currentQuestions[currentQuestionIndex].english;
            const examplesContainer = document.getElementById('answer-examples');
            examplesContainer.innerHTML = '';
            
            correctAnswers.forEach((answer, index) => {
                const exampleDiv = document.createElement('div');
                exampleDiv.className = 'sentence-example';
                exampleDiv.innerHTML = `<strong>${index + 1}.</strong> ${answer}`;
                examplesContainer.appendChild(exampleDiv);
            });
            
            document.getElementById('correct-answer').classList.remove('hidden');
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < totalQuestions) {
                showCurrentQuestion();
                updateProgress();
            } else {
                showResult();
            }
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            document.getElementById('question-progress').style.width = progress + '%';
            document.getElementById('progress-fill').style.width = ((score / totalQuestions) * 100) + '%';
            document.getElementById('progress-text').textContent = Math.round((score / totalQuestions) * 100) + '%';
        }

        // æ˜¾ç¤ºç»“æœ
        function showResult() {
            document.getElementById('practice-area').classList.add('hidden');
            document.getElementById('practice-result').classList.remove('hidden');
            
            const accuracy = Math.round((score / totalQuestions) * 100);
            
            document.getElementById('total-questions-count').textContent = totalQuestions;
            document.getElementById('correct-answers-count').textContent = score;
            document.getElementById('final-score').textContent = accuracy + '%';
            
            const resultIcon = document.getElementById('result-icon');
            const resultMessage = document.getElementById('result-message');
            
            if (accuracy >= 90) {
                resultIcon.innerHTML = 'ğŸ‰';
                resultMessage.textContent = 'å¤ªæ£’äº†ï¼ä½ å·²ç»æŒæ¡äº†è‹±è¯­ä¼šè®®ç”¨è¯­ï¼';
            } else if (accuracy >= 70) {
                resultIcon.innerHTML = 'ğŸ‘';
                resultMessage.textContent = 'åšå¾—å¾ˆå¥½ï¼ç»§ç»­ç»ƒä¹ ä¼šæ›´åŠ å®Œç¾ï¼';
            } else if (accuracy >= 50) {
                resultIcon.innerHTML = 'ğŸ˜Š';
                resultMessage.textContent = 'ä¸é”™çš„å°è¯•ï¼å¤šç»ƒä¹ ä¼šæœ‰å¾ˆå¤§è¿›æ­¥ï¼';
            } else {
                resultIcon.innerHTML = 'ğŸ’ª';
                resultMessage.textContent = 'ç»§ç»­åŠªåŠ›ï¼å¤šç»ƒä¹ å°±èƒ½æŒæ¡ï¼';
            }
        }

        // è¿”å›åœºæ™¯é€‰æ‹©
        function backToSelection() {
            stopRecording();
            
            document.getElementById('practice-area').classList.add('hidden');
            document.getElementById('practice-result').classList.add('hidden');
            document.getElementById('scene-selection').classList.remove('hidden');
            document.getElementById('custom-scene-manager').classList.remove('hidden');
            document.getElementById('browser-warning').classList.add('hidden');
            
            document.getElementById('progress-fill').style.width = '0%';
            document.getElementById('progress-text').textContent = '0%';
        }

        // é‡æ–°ç»ƒä¹ 
        function restartPractice() {
            document.getElementById('custom-scene-manager').classList.add('hidden');
            if (currentScene === 'opening' || currentScene === 'discussion' || 
                currentScene === 'opinions' || currentScene === 'questions' || 
                currentScene === 'closing' || currentScene === 'mixed') {
                startPractice(currentScene);
            } else {
                // å¦‚æœæ˜¯è‡ªå®šä¹‰åœºæ™¯ï¼Œåˆ™é‡æ–°å¼€å§‹è‡ªå®šä¹‰åœºæ™¯ç»ƒä¹ 
                startCustomPractice(currentScene);
            }
        }

        // å¤„ç†é”®ç›˜äº‹ä»¶
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        }

        // å·¥å…·å‡½æ•°ï¼šæ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // å·¥å…·å‡½æ•°ï¼šè®¡ç®—å­—ç¬¦ä¸²ç›¸ä¼¼åº¦
        function similarity(s1, s2) {
            if (s1.length === 0 || s2.length === 0) return 0;
            
            const longer = s1.length >= s2.length ? s1 : s2;
            const shorter = s1.length < s2.length ? s1 : s2;
            
            const longerLength = longer.length;
            if (longerLength === 0) return 1.0;
            
            return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);
        }

        function editDistance(s1, s2) {
            s1 = s1.toLowerCase();
            s2 = s2.toLowerCase();

            const costs = new Array();
            for (let i = 0; i <= s1.length; i++) {
                let lastValue = i;
                for (let j = 0; j <= s2.length; j++) {
                    if (i === 0) {
                        costs[j] = j;
                    } else {
                        if (j > 0) {
                            let newValue = costs[j - 1];
                            if (s1.charAt(i - 1) !== s2.charAt(j - 1)) {
                                newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                            }
                            costs[j - 1] = lastValue;
                            lastValue = newValue;
                        }
                    }
                }
                if (i > 0) {
                    costs[s2.length] = lastValue;
                }
            }
            return costs[s2.length];
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.querySelectorAll('.hover-lift').forEach((element, index) => {
                    setTimeout(() => {
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }, index * 100);
                });
            }, 500);
            // å»¶è¿ŸåŠ è½½è‡ªå®šä¹‰åœºæ™¯ï¼Œç¡®ä¿DOMå®Œå…¨åŠ è½½
            setTimeout(() => {
                loadCustomScenes();
            }, 1000);
        });
        
        function uploadCustomScene() {
            const fileInput = document.getElementById('json-upload');
            const file = fileInput.files[0];
            if (!file) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªJSONæ–‡ä»¶');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                try {
                    const data = JSON.parse(event.target.result);
                    if (validateJSON(data)) {
                        saveCustomScene(data);
                        loadCustomScenes();
                        alert('è‡ªå®šä¹‰åœºæ™¯å·²æˆåŠŸä¸Šä¼ å¹¶ä¿å­˜ï¼');
                    } else {
                        alert('JSONæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ã€‚');
                    }
                } catch (e) {
                    alert('è§£æJSONæ–‡ä»¶æ—¶å‡ºé”™ï¼Œè¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ã€‚');
                }
            };
            reader.readAsText(file);
        }

        function uploadCustomScene() {
            const fileInput = document.getElementById('json-upload');
            const file = fileInput.files[0];
            if (!file) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªJSONæ–‡ä»¶');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                try {
                    const data = JSON.parse(event.target.result);
                    if (validateJSON(data)) {
                        saveCustomScene(data);
                        loadCustomScenes();
                        alert('è‡ªå®šä¹‰åœºæ™¯å·²æˆåŠŸä¸Šä¼ å¹¶ä¿å­˜ï¼');
                    } else {
                        alert('JSONæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ã€‚');
                    }
                } catch (e) {
                    alert('è§£æJSONæ–‡ä»¶æ—¶å‡ºé”™ï¼Œè¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ã€‚');
                }
            };
            reader.readAsText(file);
        }

        function validateJSON(data) {
            // éªŒè¯åŸºæœ¬å­—æ®µ
            if (!data.id || typeof data.id !== 'string') return false;
            if (!data.title || typeof data.title !== 'string') return false;
            if (!data.description || typeof data.description !== 'string') return false;
            if (!data.questions || !Array.isArray(data.questions)) return false;

            // éªŒè¯é—®é¢˜æ•°ç»„ä¸­çš„æ¯ä¸ªé—®é¢˜
            for (const q of data.questions) {
                if (!q.chinese || typeof q.chinese !== 'string') return false;
                
                // éªŒè¯è‹±æ–‡å­—æ®µï¼Œéœ€è¦æ”¯æŒå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ä¸¤ç§æ ¼å¼
                if (!q.english) return false;
                
                if (typeof q.english === 'string') {
                    // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸ºæ•°ç»„æ ¼å¼
                    q.english = [q.english];
                } else if (Array.isArray(q.english)) {
                    // å¦‚æœæ˜¯æ•°ç»„ï¼ŒéªŒè¯æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å­—ç¬¦ä¸²
                    for (const eng of q.english) {
                        if (typeof eng !== 'string') return false;
                    }
                } else {
                    return false;
                }
            }

            return true;
        }

        function saveCustomScene(data) {
            // ä¿å­˜å‰å†æ¬¡éªŒè¯å¹¶ç¡®ä¿æ ¼å¼æ­£ç¡®
            if (validateJSON(data)) {
                // ç¡®ä¿æ‰€æœ‰è‹±æ–‡ç­”æ¡ˆéƒ½æ˜¯æ•°ç»„æ ¼å¼
                const processedData = {
                    ...data,
                    questions: data.questions.map(q => {
                        if (typeof q.english === 'string') {
                            return {...q, english: [q.english]};
                        } else {
                            return {...q};
                        }
                    })
                };
                localStorage.setItem('custom_scenario_' + data.id, JSON.stringify(processedData));
            }
        }

        function loadCustomScenes() {
            const sceneSelectionGrid = document.querySelector('#scene-selection .grid');
            document.querySelectorAll('.custom-scene-btn').forEach(btn => btn.remove());

            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('custom_scenario_')) {
                    const data = JSON.parse(localStorage.getItem(key));
                    const sceneButton = document.createElement('button');
                    sceneButton.className = 'scene-button hover-lift custom-scene-btn';
                    sceneButton.onclick = () => startCustomPractice(data.id);

                    const content = document.createElement('div');
                    content.style.position = 'relative';
                    content.innerHTML = `
                        <span class="text-3xl mb-2">ğŸ“</span>
                        <h3 class="text-xl font-semibold mb-2">${data.title}</h3>
                        <p class="text-sm opacity-90">${data.description}</p>
                    `;

                    const deleteButton = document.createElement('button');
                    deleteButton.className = 'delete-btn';
                    deleteButton.style.position = 'absolute';
                    deleteButton.style.bottom = '-10px';
                    deleteButton.style.left = '-10px';
                    deleteButton.style.background = 'rgba(108, 117, 125, 0.7)';
                    deleteButton.style.color = 'white';
                    deleteButton.style.borderRadius = '50%';
                    deleteButton.style.width = '28px';
                    deleteButton.style.height = '28px';
                    deleteButton.style.border = 'none';
                    deleteButton.style.cursor = 'pointer';
                    deleteButton.style.fontSize = '14px';
                    deleteButton.style.lineHeight = '28px';
                    deleteButton.style.textAlign = 'center';
                    deleteButton.style.display = 'flex';
                    deleteButton.style.alignItems = 'center';
                    deleteButton.style.justifyContent = 'center';
                    deleteButton.style.padding = '0';
                    deleteButton.innerHTML = 'â™»';
                    deleteButton.addEventListener('click', (event) => {
                        event.stopPropagation();
                        deleteCustomScene(data.id, event);
                    });

                    content.appendChild(deleteButton);
                    sceneButton.appendChild(content);
                    sceneSelectionGrid.appendChild(sceneButton);
                }
            }
        }

        function deleteCustomScene(id, event) {
            event.stopPropagation();
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè‡ªå®šä¹‰åœºæ™¯å—ï¼Ÿ')) {
                localStorage.removeItem('custom_scenario_' + id);
                // é‡æ–°åŠ è½½è‡ªå®šä¹‰åœºæ™¯ä»¥æ›´æ–°ç•Œé¢
                setTimeout(() => {
                    loadCustomScenes();
                }, 100);
            }
        }
        
        function updateFileName(input) {
            const fileNameDisplay = document.getElementById('file-name-display');
            if (input.files.length > 0) {
                fileNameDisplay.textContent = input.files[0].name;
            } else {
                fileNameDisplay.textContent = 'é€‰æ‹©JSONæ–‡ä»¶';
            }
        }

        function startCustomPractice(id) {
            const data = JSON.parse(localStorage.getItem('custom_scenario_' + id));
            currentScene = data.id;
            // ç¡®ä¿æ¯ä¸ªé—®é¢˜çš„englishå­—æ®µæ˜¯æ•°ç»„æ ¼å¼
            currentQuestions = data.questions.map(q => {
                if (typeof q.english === 'string') {
                    return {...q, english: [q.english]};
                } else {
                    return {...q};
                }
            });
            currentQuestionIndex = 0;
            score = 0;
            totalQuestions = currentQuestions.length;

            document.getElementById('scene-selection').classList.add('hidden');
            document.getElementById('custom-scene-manager').classList.add('hidden');
            document.getElementById('practice-area').classList.remove('hidden');

            document.getElementById('scene-title').textContent = data.title;
            document.getElementById('scene-description').textContent = data.description;

            document.getElementById('total-questions').textContent = totalQuestions;
            updateProgress();

            showCurrentQuestion();
        }
    </script>

</body></html>
